<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title th:text="#{app.name}">messages.properties ê°’ ì¶œë ¥</title>

  <link rel="stylesheet" href="/css/main-style.css/">
  
  <th:block th:replace="~{common/common}"></th:block>
</head>
<body>
  <th:block th:replace="~{common/header}"></th:block>
  <main class="main">


    <!-- ì„¸ì…˜ ê°’ì´ ìˆëŠ”ì§€ í™•ì¸
    <p th:text="${loginMember != null ? 'ë¡œê·¸ì¸ ìƒíƒœì…ë‹ˆë‹¤' : 'ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹™ë‹ˆë‹¤'}"></p>

    ì„¸ì…˜ì— ì €ì¥ëœ loginMemberì˜ ê°’ ì¶œë ¥ (ë””ë²„ê·¸ìš©)
    <p th:text="${loginMember != null ? loginMember.memberId : 'ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹˜'}"></p> -->
    
    <!-- ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ ë•Œ -->
    <th:block th:if="${loginMember == null}">
      <!-- ë¡œê·¸ì¸ ì„¹ì…˜ -->
      <section class="login-section">
        <form action="/signin">
          <fieldset>
            <div class="login-box">
              <div class="wrapLoginButton">
                <button class="mainLoginButton" style="font-family: 'NEXON Lv1 Gothic OTF';">ë¡œê·¸ì¸</button>
              </div>
              <article class="pwjoin">
                <a href="findIdPage" class="pwjoin-button" style="color: black; text-decoration: none;">ì•„ì´ë”” ì°¾ê¸°</a>
                <a href="findPwPage" class="pwjoin-button" style="color: black; text-decoration: none;">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
                <a href="tacou" class="pwjoin-button" style="color: black; text-decoration: none;">íšŒì›ê°€ì…</a>
              </article>
            </div>
            
          </fieldset>
        </form>
      </section>

      <!-- ì¶”ì²œ ëª¨ì„ ëª©ë¡ -->

      <th:block th:if="${#lists.isEmpty(recommendedGroups)}">
        <p>ì¶”ì²œ ëª¨ì„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
      </th:block>
      <th:block th:if="${recommendedGroups != null && !#lists.isEmpty(recommendedGroups)}">
        <h4 class="centered-title" style="color: rgb(28, 138, 106);"> &nbsp;&nbsp; â˜… ì¶”ì²œ ëª¨ì„</h4>
        <h1 class="centered-title" style="color: black;">" ë§ˆìŒìœ¼ë¡œ ì´ì–´ì§„ ëª¨ì„ " <br><br> </h1>

        </h1>

        <section class="activity-section">
          <div class="category-container">
            <div class="category-box" th:each="group : ${recommendedGroups}">
              <div class="icon">
                <img th:src="${group.groupMainImg != null ? group.groupMainImg : '/images/default.png'}" />
              </div>
              <div class="details">
                <div class="location">[[${group.categoryName}]]
                  <span class="recommendBtn">
                    ì¶”ì²œ
                  </span>
                </div>
                
                <a th:href="@{/groupMain/{groupNo}(groupNo=${group.groupNo})}" 
                   class="categoryGroup-name" 
                   style="color: black; text-decoration: none;">
                    [[${group.groupName}]]
                </a>
                <div class="group-name">[[${group.groupIntroduce}]]</div>
                <div class="participants">
                  <i class="fa-solid fa-users"> &nbsp;</i>
                  <div>
                    [[${group.currentPopulation}]] / [[${group.maxPopulation}]]
                  </div>
                </div>
                
                <div class="profile-images">
                  <div th:each="member : ${group.members}">
                    <img th:src="${member.memberImg != null ? member.memberImg : '/images/default-profile.png'}" 
                         alt="í”„ë¡œí•„ ì´ë¯¸ì§€" class="profile-image" 
                         onerror="this.src='/images/default-profile.png'">
                  </div>
                </div>
                
              </div>
            </div>
          </div>
        </section>
      </th:block>
   

    
        <!-- ìµœê·¼ ì±„íŒ… ëª¨ì„ ëª©ë¡ -->
        <th:block th:if="${recentChatGroups != null && !#lists.isEmpty(recentChatGroups)}">
          <h4 class="centered-title" style="color: #1082fd;"><br><br><br><br><br><br><br><br><br> &nbsp;&nbsp; ğŸ’¬ ìµœê·¼ ì±„íŒ… ëª¨ì„</h4>
          <div class="centered-title" style="text-align: center; color: black;">
            <h1 style="display: inline; font-size: 2em;">" ëŒ€</h1>
            <h3 style="display: inline;">í™”ë¡œ</h3>
          </div>
          <div class="centered-title" style="text-align: center; color: black;">
              &nbsp;&nbsp;<h1 style="display: inline; font-size: 2em;">ëª¨</h1>
              <h3 style="display: inline;">ë‘ í•¨ê»˜í•˜ëŠ”</h3>
          </div>
          <div class="centered-title" style="text-align: center; color: black;">
              &nbsp;&nbsp;<h3 style="display: inline;">ëª¨</h3>
              <h1 style="display: inline; font-size: 2em;">ì„ "</h1> <br><br>
  
          </div>
          <section class="activity-section">
              <div class="category-container">
                  <div class="category-box" th:each="group : ${recentChatGroups}">
                      <div class="icon">
                          <img th:src="${group.groupMainImg != null ? group.groupMainImg : '/images/default.png'}" />
                      </div>
                      <div class="details">
                          <div class="location">[[${group.categoryName}]]
                            <span class="lastChatBtn"> [[${recentChatTimes[group.groupNo]}]] ë§ˆì§€ë§‰ ì±„íŒ…</span>
                          </div>
                          
                          <a th:href="@{/groupMain/{groupNo}(groupNo=${group.groupNo})}" 
                            class="categoryGroup-name" 
                            style="color: black; text-decoration: none;">
                              [[${group.groupName}]]
                          </a>
                          <div class="group-name">[[${group.groupIntroduce}]]</div>
                          <div class="participants">
                            <i class="fa-solid fa-users"> &nbsp;</i>
                            <div>
                                [[${group.currentPopulation}]] / [[${group.maxPopulation}]]
                            </div>
                        </div>
                        <div class="profile-images">
                          <div th:each="member : ${group.members}">
                            <img th:src="${member.memberImg != null ? member.memberImg : '/images/default-profile.png'}" 
                                  alt="í”„ë¡œí•„ ì´ë¯¸ì§€" class="profile-image"
                                  onerror="this.src='/images/default-profile.png'">

                          </div>
                        </div>
                        
                      </div>
                  </div>
              </div>
          </section>
        </th:block>
      </th:block>



    <!-- ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œ ë‚´ê°€ ê°€ì…í•œ ëª¨ì„ ëª©ë¡ -->
    <th:block th:if="${loginMember != null}">
      <th:block th:unless="${joinGroups != null && !#lists.isEmpty(joinGroups)}">
        <p>ê°€ì…í•œ ëª¨ì„ì´ ì—†ìŠµë‹ˆë‹¤.</p>
      </th:block>
      
      <th:block th:if="${joinGroups != null && !#lists.isEmpty(joinGroups)}">
        <h4 class="centered-title" style="color: rgb(244, 54, 48);"><br><br><br> &nbsp;&nbsp; â™¥ ë‚´ê°€ ê°€ì…í•œ ëª¨ì„</h4>
        <h1 class="centered-title" style="color: black;">" ë§ˆìŒìœ¼ë¡œ ì´ì–´ì§„ ëª¨ì„ " <br><br> </h1>
        <section class="activity-section">
          <div class="category-container">
            <div class="category-box" th:each="group : ${joinGroups}">
              <div class="icon">
                <img th:src="${group.groupMainImg != null ? group.groupMainImg : '/images/default.png'}" />
              </div>
              <div class="details">
                <div class="location">[[${group.categoryName}]]</div>
                <a th:href="@{/groupMain/{groupNo}(groupNo=${group.groupNo})}" 
                   class="categoryGroup-name" 
                   style="color: black; text-decoration: none;">
                    [[${group.groupName}]]
                </a>
                <div class="group-name">[[${group.groupIntroduce}]]</div>
                <div class="participants">
                  <i class="fa-solid fa-users"> &nbsp;</i>
                  <div>
                    [[${group.currentPopulation}]] / [[${group.maxPopulation}]]
                  </div>
                </div>
                <div class="profile-images">
                  <img th:src="${member.memberImg != null ? member.memberImg : '/images/default-profile.png'}" 
                       alt="í”„ë¡œí•„ ì´ë¯¸ì§€" class="profile-image" 
                       th:each="member : ${group.members}" />
                </div>
              </div>
            </div>
          </div>
        </section>
      </th:block>
    </th:block>

 <!--    <section class="scroll-top">
      <button id="scrollTopBtn"><i class="fa-solid fa-circle-chevron-up"></i></button>
    </section> -->
    <br>
    <br>
  <!-- <script>
    document.getElementById('scrollTopBtn').addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  </script> -->

    <th:block th:replace="~{common/footer}"></th:block>
  </main>


  
  <script src="/js/main.js"></script>

</body>
</html>
